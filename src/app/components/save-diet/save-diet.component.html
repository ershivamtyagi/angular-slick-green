<ion-content>
  <ion-grid>
    <form [formGroup]="diet" (ngSubmit)="onSubmit(diet)">
      <ion-item-sliding>
        <ion-label>Enter diet Name</ion-label>
        <ion-input class="form-control" type="text" placeholder="diet Name" formControlName="name" required>
        </ion-input>
        <span color="danger"
          *ngIf="!diet.get('name').valid && (diet.get('name').touched || diet.get('name').dirty)">
          Please provide a valid diet Name
          <!-- {{diet.get('name').errors | json}} -->
          <div *ngIf="diet.get('name')?.errors?.required">
            Name is required.
          </div>
        </span>
      </ion-item-sliding>
      <ion-row>
        <ion-button (click)="addMeal()" class="point">
          <ion-icon slot="end" name="add-circle-outline" size="small"></ion-icon>Meal
        </ion-button>
        <ion-button color="danger" (click)="removeMeal(val-1)" class="point">
          <ion-icon slot="end" name="remove-circle-outline" size="small"></ion-icon>Meal
        </ion-button>

      </ion-row>
      <!---Excersize Section -->
      <div formArrayName="meals">
        <div class="section-container" *ngFor="let meal of getMeals(diet); let i = index">
          <div [formGroupName]="i">
            <ion-row>
              <ion-col>
                <ion-input type="text" formControlName="sno" readonly></ion-input>

              </ion-col>
               <ion-col>
                <!-- <ion-input debounce="1500" (ionChange)="yourSearchFunction($event,i)"  class="form-control" type="text" placeholder="Excersize Name" -->
                  <ion-input class="form-control" type="text" placeholder=" Name" formControlName="name">
                </ion-input>
              </ion-col> 
              <!-- <ion-col>
                <ion-input class="form-control" type="text" placeholder="Excersize Description"
                  formControlName="excersizeDescription"></ion-input>
              </ion-col> -->
              <ion-col>
                <ion-button shape="round" fill="outline" color="success" size="small" (click)="addIngredients(i)">
                  <ion-icon slot="end" name="add-circle-outline" size="small"></ion-icon>Ingredient
                </ion-button>
                <ion-button shape="round" fill="outline" color="warning" size="small" (click)="move(-1, i)">
                  <ion-icon slot="end" name="arrow-up-outline" size="small"></ion-icon>
                </ion-button>
                <ion-button shape="round" fill="outline" color="danger" size="small" (click)="move(i, 1)">
                  <ion-icon slot="end" name="arrow-down-outline" size="small"></ion-icon>
                </ion-button>

              </ion-col>
            </ion-row>
            <!-- Set Section -->
            <div class="question-container" formArrayName="ingridiants">
              <div [formGroupName]="j" *ngFor="let question of getIngredients(meal); let j = index">
                <ion-row>
                  <ion-col>
                    <ion-input type="text" placeholder="Name" formControlName="name"></ion-input>
                  </ion-col>
                  <ion-col>
                    <ion-input type="text" placeholder="Calory" formControlName="calory"></ion-input>
                  </ion-col>
                  <ion-col>
                    <ion-input type="text" placeholder="Quantity" formControlName="quantity"></ion-input>
                  </ion-col>
                  <ion-button size="small" shape="round" fill="outline" color="danger" (click)="removeSet(i,j)">
                    <ion-icon slot="end" name="remove-circle-outline" size="small"></ion-icon>
                  </ion-button>
                  <ion-button size="small" shape="round" fill="outline" color="warning" (click)="copySet(i,j)">
                    <ion-icon slot="end" name="copy-outline" size="small"></ion-icon>
                  </ion-button>
                </ion-row>
              </div>
            </div>

          </div>
        </div>
        <ion-button color="success" type="submit" class="point">Submit </ion-button>

      </div>
    </form>
  </ion-grid>
  <!-- <pre> {{diet.value | json}} </pre> -->
</ion-content>